<!DOCTYPE html>
<html lang="en">
<section class="hero overview">
  <div class="container">
    <div class="content">
      <h2>GitHub Advanced Workbook</h2>
      <p>Narratives &amp; examples for teaching GitHub curriculum</p>
    </div>
  </div>
</section>

<section>
  <div class="container">

    <!-- <div class="tab-panel">

      <input type="radio" class="material-type" name="material-scope" id="outline" value="outline">
      <label class="tab column-3up" for="outline">
        <span>Outline</span>
      </label>

      <input type="radio" class="material-type" name="material-scope" id="summary" value="summary" checked="checked">
      <label class="tab column-3up" for="summary">
        <span>Summary</span>
      </label>

      <input type="radio" class="material-type" name="material-scope" id="details" value="details">
      <label class="tab column-3up" for="details">
        <span>Details</span>
      </label>
    </div> -->

    <div class="content">
      <span id="scope">
        <h2>Common branching strategies</h2>

<h3>Summary</h3>

<ul>
<li>GitHub Flow</li>
<li>Branch-per-feature</li>
<li>Compatibility with Pull Requests</li>
<li>git-flow</li>
<li>Long-term release support</li>
</ul>


<h4>Details</h4>

<p>These are called Branching Strategies, but are just as easily called <em>Team Collaboration Techniques</em> in an abstract discussion of version control.</p>

<ul>
<li>Branch by feature</li>
<li>git-flow

<ul>
<li> Made popular on Git by Vincent Driessen and his NVIE site</li>
<li><a href="http://nvie.com/posts/a-successful-git-branching-model/">Git-Flow: A Successful Branching Model</a></li>
<li><a href="https://github.com/nvie/gitflow">Git-Flow Source</a></li>
<li>Too many levels?</li>
<li>GH prefers Simplest thing that works.</li>
</ul>
</li>
<li>GitHub Flow

<ul>
<li><a href="https://github.com/blog/919-how-github-develops">How GitHub Develops</a></li>
<li><a href="http://scottchacon.com/2011/08/31/github-flow.html">GitHub Flow blog post</a></li>
<li>Works well with Pull Requests when one-layer deep</li>
<li>Think of features much smaller than typical</li>
</ul>
</li>
<li>Git's Model

<ul>
<li><a href="https://sites.google.com/site/maintnotes/">Git Maintenance Notes</a></li>
<li><a href="https://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html">Git Workflows</a></li>
<li><a href="https://github.com/git/git">Git's Source Code</a></li>
<li>Branches

<ul>
<li>master</li>
<li>maint</li>
<li>next (graduation from pu)</li>
<li>pu (can be rebased)</li>
<li>html</li>
<li>man</li>
</ul>
</li>
<li><em>"A trivial and safe enhancement goes directly on top of 'master'."</em></li>
<li><em>"The two branches "master" and "maint" are never rewound, and "next" usually will not be either"</em></li>
<li><em>"When a topic that was in 'pu' proves to be in testable shape, it graduates to 'next'."</em></li>
</ul>
</li>
<li>Version numbers

<ul>
<li><code>major.minor.fix</code></li>
<li><a href="http://semver.org">Semantic versioning</a></li>
</ul>
</li>
<li>Rebase before sharing (sending a Pull Request)

<ul>
<li><a href="https://github.com/spring-projects/spring-social/wiki/Contributing">Contributing to Spring Social</a></li>
<li><a href="http://blog.springsource.org/2010/12/21/git-and-social-coding-how-to-merge-without-fear/">How To Merge Without Fear</a></li>
<li><a href="http://blog.springsource.org/2011/07/18/social-coding-pull-requests-what-to-do-when-things-get-complicated/">What to do when things get complicated</a></li>
</ul>
</li>
</ul>


<h2>Applying branching patterns</h2>

<h3>Summary</h3>

<ul>
<li>Breaking features down into pieces</li>
<li>Feedback early on Pull Requests</li>
<li>@mentioning teams instead of individuals</li>
<li>Continuous integration</li>
</ul>


<h2>Branch pull options</h2>

<h3>Summary</h3>

<ul>
<li>Fetch single branch</li>
<li>Merge on pull</li>
<li>Rebase on pull</li>
<li><code>FETCH_HEAD</code></li>
<li><code>MERGE_HEAD</code></li>
</ul>


<h2>Inserting Commits Into Existing History</h2>

<h3>Summary</h3>

<ul>
<li>Reusing small pieces of code with <code>cherry-pick</code>

<ul>
<li>Why use <code>cherry-pick</code> instead of <code>merge</code>?</li>
<li>What happens when you <code>cherry-pick</code>?</li>
<li>Maintaining <code>author</code> and <code>committer</code> fields</li>
<li>Tracing any cherry-picks with <code>-x</code> commit message metadata</li>
<li><code>-x</code> metadata hyperlinked on GitHub</li>
<li><code>$ git cherry</code> to view absent commits</li>
</ul>
</li>
<li>Rebase interactive

<ul>
<li>Can include cherry-pick</li>
<li>Must remember to continue the rebase</li>
<li>Alters history</li>
</ul>
</li>
</ul>


<h4>Details</h4>

<pre><code>$ git cherry-pick [ref]
$ git cherry-pick [ref1] [ref2]

$ git branch --contains [noncherrypickedref]
$ git cherry [upstreambranch]

+ bd650366fa8c39f03cfc9dd5290f60e7331a631d
+ ea62f9f6a7cef55a8a3028e617d28819408a63c4
+ 874628c0e405390130d6457776273451bb66d3a8
+ 046a9b8d0f2363361e45cfbc7e0f6d82968f2f9f
+ 315fe16408f9a9080527e00df3d9a8c1ba0dc97a
</code></pre>

<h2>Undoing and Re-doing Almost Anything</h2>

<h3>Summary</h3>

<ul>
<li>The reflog for hard resets</li>
<li>Cherry-pick for retrival from the trash</li>
<li>Amending a commit</li>
<li>Rebasing a commit</li>
<li>Resetting to a past commit (mixed, soft, hard)</li>
<li>Resetting to an upstream point</li>
<li>Aborting a merge</li>
<li>Aborting a rebase</li>
</ul>


<h4>Details</h4>

<p>To correct the prior commit:</p>

<pre><code>$ git commit --amend -m "updated message"
</code></pre>

<h2>History searches with log</h2>

<h3>Summary</h3>

<ul>
<li>Log is like a search engine</li>
<li>Search for person, time, change, contents, message</li>
<li>Dramatically narrows search time</li>
</ul>


<h4>Details</h4>

<pre><code>$ git log --author Matthew
$ git log --since 2.days.ago
$ git log -S myvar
$ git log --grep=Fix
$ git log --follow --stat --diff-filter=A -- &lt;filename&gt;
</code></pre>

<h2>Commit data structure internals</h2>

<h3>Summary</h3>

<ul>
<li>Directed acyclic graph</li>
<li>Parent references (0, 1, many)</li>
<li>Similar to a linked list</li>
<li>Orphans (and garbage collection)</li>
<li>Visualizing orphans</li>
<li>Garbage collection triggers</li>
</ul>


<h2>Building Custom Commands via Aliases</h2>

<h3>Summary</h3>

<ul>
<li>Git-specific aliases are portable</li>
<li>Auto-completion on some shells</li>
<li>Can be Git commands or shell commands</li>
<li><a href="https://github.com/matthewmccullough/dotfiles/blob/master/gitconfig#L41-L182">Matthew's <code>.gitconfig</code></a></li>
</ul>


<h4>Details</h4>

<pre><code>$ git config --global alias.s 'status -s'
</code></pre>

<h2>Tagging and releases</h2>

<h3>Summary</h3>

<ul>
<li>Why create a tag through the web UI?</li>
<li>Not a branch HEAD. Points to a specific commit.</li>
<li>Attaching binaries to releases (Web UI and API)</li>
<li>Tag with message (defaults to annotated)</li>
<li>Force existing tag to new ref</li>
<li>Delete a tag</li>
<li><code>$ git describe</code> to name the most recent reachable tag</li>
<li>Tag types (reference, annotated, signed)</li>
<li>Deleting a tag locally</li>
<li>Deleting tag on a remote</li>
</ul>


<h4>Details</h4>

<pre><code>$ git tag
$ git tag -a
$ git tag -a -m

$ git tag -m&lt;message&gt; &lt;TAGNAME&gt;
$ git tag -a -m&lt;message&gt; &lt;TAGNAME&gt;
$ git tag -s -m&lt;message&gt; &lt;TAGNAME&gt;
$ git tag -f &lt;TAGNAME&gt;
$ git tag -d &lt;TAGNAME&gt;
$ git describe
$ git describe &lt;SHA&gt;
$ git tag -d 12345
$ git push origin :&lt;tag-name-to-delete&gt;
</code></pre>

<h2>Project management on GitHub</h2>

<h3>Summary</h3>

<ul>
<li>Effective milestone</li>
<li>Links to Milestones</li>
<li>Pulse</li>
<li>Contributor graphs</li>
<li>Traffic graphs</li>
<li>Issue dashboard (cross-repo view)</li>
</ul>


<h2>Visualizations on GitHub</h2>

<h3>Summary</h3>

<ul>
<li>Branches page</li>
<li>Compare view</li>
<li>Compare with <code>master@{yesterday}</code> refs</li>
<li>Network graph</li>
<li>Network members</li>
</ul>


<h2>Advanced Pull Request use</h2>

<h3>Summary</h3>

<ul>
<li>PRs to horizontal contributors</li>
<li>PRs multiple levels up</li>
<li>Converting issues to PRs</li>
<li>PRs as Issues with code</li>
<li>Automatic closing of PRs by local merges</li>
<li>Merges must be <em>made by recursive</em></li>
<li>Retrieving PRs locally to resolve conflicts
(without locally merging to target branch)</li>
</ul>


<h4>Details</h4>

<pre><code>$ git ls-remote origin
$ git fetch origin refs/pull/1/head

From github.com:youruser/somereponame
 * branch            refs/pull/1/head -&gt; FETCH_HEAD

$ git show FETCH_HEAD
$ git merge --no-commit --no-ff FETCH_HEAD
</code></pre>

<h2>GitHub API</h2>

<h3>Summary</h3>

<ul>
<li>Requests</li>
<li>Authorization</li>
<li>Octokit wrappers</li>
<li>Hypermedia as the Engine of Application State (HATEOS)</li>
</ul>


<h2>Service hooks and Webhooks</h2>

<h3>Summary</h3>

<ul>
<li>Pre-built service hooks</li>
<li>Custom webhooks</li>
<li>Specifying webhook events</li>
<li>Testing webhooks</li>
</ul>


<h2>Staging Shortcuts</h2>

<h3>Summary</h3>

<ul>
<li>Add parts of files</li>
<li>Add files interactively</li>
</ul>


<h4>Details</h4>

<pre><code># Add in patch mode
$ git add -p

# Add interactively
$ git add -i

# The GitHub for Mac desktop client
$ github
</code></pre>

<h2>Stashing with precision</h2>

<h3>Summary</h3>

<ul>
<li>Name your stash</li>
<li>List stashes</li>
<li>Use specific stashes</li>
</ul>


<h4>Details</h4>

<pre><code>$ git stash save "&lt;description&gt;"
$ git stash --include-untracked
$ git stash list
$ git stash pop &lt;name&gt;
$ git stash drop &lt;name&gt;
$ git stash apply
$ git stash clear
$ git stash -p
</code></pre>

<h2>Committing Efficiencies</h2>

<h3>Summary</h3>

<ul>
<li>Add and commit</li>
<li>Amend existing commit</li>
</ul>


<h4>Details</h4>

<pre><code>$ git commit -a -m"message"
$ git commit --amend
</code></pre>

<h2>Advanced GitHub Issues</h2>

<h3>Summary</h3>

<ul>
<li><a href="https://guides.github.com/overviews/issues/">Guide to Mastering Issues</a></li>
<li><a href="https://help.github.com/articles/closing-issues-via-commit-messages">Automatic closing of Issues by commit</a></li>
<li>Symmetric cross-links of issue mentions</li>
<li>Cross-repo Issue mentions</li>
</ul>


<h4>Details</h4>

<ul>
<li>Issues can auto-close when merged to the <em>default</em> branch</li>
<li><a href="https://help.github.com/articles/closing-issues-via-commit-messages">Keywords</a> to close issues:

<ul>
<li><code>close</code></li>
<li><code>closes</code></li>
<li><code>closed</code></li>
<li><code>fix</code></li>
<li><code>fixes</code></li>
<li><code>fixed</code></li>
<li><code>resolve</code></li>
<li><code>resolves</code></li>
<li><code>resolved</code></li>
</ul>
</li>
</ul>


<pre><code>$ git commit -m "This fixes #[issue]"
$ git commit -m "This closes #[issue]"
$ git commit -m "This resolves #[issue]"
</code></pre>

<h2>History analysis</h2>

<h3>Summary</h3>

<ul>
<li>Commit ranges to review branch differences</li>
<li>Verifying merges have completed</li>
</ul>


<h4>Details</h4>

<pre><code>$ git log --left-right branchA...branchB
$ git branch --contains [ref]

$ git name-rev [commit-ref]
</code></pre>

<h2>Remote reviewing, synchronization</h2>

<h3>Summary</h3>

<ul>
<li>Determine what's on the upstream</li>
<li>Identify out-of-date branches</li>
<li>Review Pull Requests</li>
</ul>


<h4>Details</h4>

<pre><code>$ git remote -v
$ git remote show &lt;remote-name&gt;
$ git ls-remote
$ git branch -vv
</code></pre>

<p>Retrieving a Pull Request branch (does not matter if it is a fork or on same repo):</p>

<pre><code>$ git pull [remote] [pull-request-namespace]

$ git fetch [remote] [pull-request-namespace]
</code></pre>

<p>Obtaining any repository's branch:</p>

<pre><code>$ git fetch &lt;URL&gt; &lt;branch&gt;
$ git checkout FETCH_HEAD
$ git branch &lt;newbranchname&gt; FETCH_HEAD
</code></pre>

<h2>Upstream maintenance</h2>

<h3>Summary</h3>

<ul>
<li>Remove non-matching <em>local</em> remote branches</li>
<li>Remove non-matching remote upstream branches</li>
<li>Remove only remote upstream branch</li>
</ul>


<h4>Details</h4>

<pre><code>$ git remote update --prune
$ git push &lt;remote&gt; --prune
$ git push origin :&lt;branch-name&gt;
</code></pre>

<h2>Rebasing basics</h2>

<h3>Summary</h3>

<ul>
<li>Branch Preparation</li>
<li>Rebasing <strong>is not</strong> merging</li>
</ul>


<h4>Details</h4>

<pre><code>$ git checkout &lt;featurebranch&gt;
$ git rebase master

$ git config pull.rebase true
</code></pre>

<ul>
<li>Conflicts can occur</li>
<li>Resolution is simple</li>
<li>Small variation to merge conflict</li>
</ul>


<pre><code>$ git add [conflicting-file]
$ git rebase --continue
</code></pre>

<h2>Interactive rebasing</h2>

<h3>Summary</h3>

<ul>
<li>Reorder commits</li>
<li>Rewrite history entirely</li>
<li>Discard commits</li>
<li>Revise/edit commits</li>
<li>Safe patterns for rebasing local history</li>
<li>Verbs (cheat sheet of commands)</li>
</ul>


<h4>Details</h4>

<pre><code>$ git rebase -i &lt;REF&gt;
$ git rebase -i [remote]/[branch]
</code></pre>

<h2>Advanced rebasing</h2>

<h3>Summary</h3>

<ul>
<li><a href="http://git-scm.com/book/ch3-6.html">Rebasing chapter of Pro Git book</a></li>
<li><a href="http://git-scm.com/book/ch3-6.html#More-Interesting-Rebases">Git rebase --onto section of Pro Git book</a></li>
<li>Changing where branch history begins</li>
<li>Moving blocks of history around</li>
<li>Breadcrumbs for later fixups and squashes</li>
</ul>


<h4>Details</h4>

<pre><code>$ git rebase --onto &lt;newbase&gt; &lt;upstream&gt; &lt;branch&gt;
</code></pre>

<ul>
<li>Important of commit message prefix</li>
<li><code>fixup! [common-pattern]</code></li>
<li><code>squash! [common-pattern]</code></li>
</ul>


<pre><code>$ git rebase --autosquash [ref]
</code></pre>

<h2>Squash merging</h2>

<h3>Summary</h3>

<ul>
<li>Collapsing commits during merge</li>
<li>Pros/cons (loss of granularity)</li>
<li>Relation to branching strategies and deliverable expectations</li>
</ul>


<pre><code>$ git merge --squash [branch]
</code></pre>

<h2>Revising history safely</h2>

<h3>Summary</h3>

<ul>
<li>Safely resetting local history</li>
<li>Guaranteeing remote history is not lost</li>
</ul>


<h4>Details</h4>

<pre><code>$ git reset --[option] [remote]/[branch]
</code></pre>

<h2>Cleaning</h2>

<h3>Summary</h3>

<ul>
<li>Purge untracked in working dir</li>
<li>for directories</li>
<li>for removing ignored files (useful for tidying build artifacts)</li>
</ul>


<h4>Details</h4>

<pre><code>$ git clean -f
$ git clean -fd
$ git clean -fx
</code></pre>

<h2>Treeish / commitish</h2>

<h3>Summary</h3>

<ul>
<li>Simple ways of describing history points</li>
<li>Easier-to-describe and understand numerically</li>
</ul>


<h4>Details</h4>

<pre><code>HEAD
HEAD^^
HEAD~2
</code></pre>

<h2>Diff Tool</h2>

<h3>Summary</h3>

<ul>
<li><a href="http://www.perforce.com/downloads/Perforce/20-User">P4Merge</a></li>
<li>Opendiff</li>
<li>KDiff</li>
<li>Kaleidoscope</li>
<li>Vimdiff</li>
<li>Meld</li>
</ul>


<h4>Details</h4>

<p>Difftool execution:</p>

<pre><code>$ git difftool --tool-help
$ git config diff.tool &lt;tool-name-in-config&gt;
$ git config difftool.prompt false
$ git config difftool.&lt;tool-name&gt;.cmd "&lt;path [args]&gt;"
</code></pre>

<p>A sample <code>.gitconfig</code> file:</p>

<pre><code>[diff]
    tool = p4merge
[difftool "p4merge"]
    cmd = "/Applications/p4merge.app/Contents/Resources/launchp4merge $LOCAL $REMOTE"
[difftool]
    prompt = false
</code></pre>

<h2>Merge Tool</h2>

<h3>Summary</h3>

<ul>
<li>Same as difftool, but 3-way comparison</li>
</ul>


<h4>Details</h4>

<p>Mergetool execution:</p>

<pre><code>$ git config --global merge.tool p4mergetool

$ git config --global mergetool.p4mergetool.cmd "/Applications/p4merge.app/Contents/Resources/launchp4merge \$PWD/\$BASE \$PWD/\$REMOTE \$PWD/\$LOCAL \$PWD/\$MERGED"

$ git config --global mergetool.p4mergetool.trustExitCode false

$ git config --global mergetool.keepBackup false
</code></pre>

<p>A sample <code>.gitconfig</code> file:</p>

<pre><code>[merge]
    tool = Kaleidoscope
[mergetool "p4mergetool"]
    cmd = " /Applications/p4merge.app/Contents/Resources/launchp4merge $PWD/$BASE $PWD/$REMOTE $PWD/$LOCAL $PWD/$MERGED"
    keepBackup = false
</code></pre>

<h2>GitHub CLI</h2>

<h3>Summary</h3>

<ul>
<li>API for interfacing with your repos</li>
<li>Where config/credentials are stored</li>
<li>Reasons for usage</li>
</ul>


<h4>Details</h4>

<pre><code>$ gh create
$ gh pull-request
$ gh fork
$ gh compare
$ gh browse
</code></pre>

<h2>Minimizing repetitive conflict resolution with ReReRe</h2>

<h3>Summary</h3>

<ul>
<li>Reuse recorded resolution</li>
<li>Stores solutions for a limited period of time</li>
<li>Machine-local storage</li>
<li>Based on diffs (not heuristics)</li>
<li>Helps with "trial merges"</li>
</ul>


<h4>Details</h4>

<pre><code>$ git config rerere.enable true
</code></pre>

<h2>Refspecs</h2>

<h3>Summary</h3>

<ul>
<li>Specification for retrieval and pushing</li>
<li>Implied on fetch, pull, and push</li>
<li>Altered by option switches like <code>--tags</code></li>
<li>Stored in <code>.git/config</code></li>
<li>Ability to retrieve Pull Request branches</li>
</ul>


<pre><code>$ git fetch [repo-url] [source]:[destination]
$ git config --add remote.[upstream].fetch "+refs/pull/*/head:refs/remotes/[upstream]/pull/*"
</code></pre>

<h2>Git Notes</h2>

<h3>Summary</h3>

<ul>
<li>Supplements commit message and description</li>
<li>Parallel graph</li>
<li>Not cryptographically as trustworthy as the commits</li>
<li>Displayed in the GitHub web UI</li>
<li>Ability to namespace</li>
<li>Manual publishing</li>
<li>Manual retrieval</li>
</ul>


<pre><code>$ git notes add [commit]
$ git notes edit [commit]

$ git notes --ref=[namespace] add [commit]
$ git log --show-notes=[namespace]

$ git push [remote] refs/notes/*
$ git push [remote] refs/notes/[namespace]

$ git fetch [remote] refs/notes/*:refs/notes/*
</code></pre>

<h2>Credential Caching</h2>

<h3>Summary</h3>

<ul>
<li>Save passwords securely</li>
</ul>


<h4>Details</h4>

<pre><code>$ git config --global credential.helper cache
$ git config credential.helper 'osxkeychain'
$ git config credential.helper 'wincred'
$ git credential-cache exit
</code></pre>

<h2>SSH keys</h2>

<h3>Summary</h3>

<ul>
<li>Classic authentication with GitHub</li>
<li>Diminishing in use at HTTPS increases</li>
<li>Blocked by more firewalls</li>
<li><a href="https://help.github.com/articles/generating-ssh-keys">Generate SSH key</a></li>
<li><a href="https://github.com/settings/ssh">Upload public key to GitHub</a></li>
<li><a href="https://github.com/settings/ssh">Audit SSH key use</a></li>
</ul>


<h4>Details</h4>

<pre><code># Generate the key
$ ssh-keygen -t rsa -C"Anything..."

# Verify that the key works
$ ssh -T git@github.com
</code></pre>

<h2>Git-core GUIs</h2>

<h3>Summary</h3>

<ul>
<li>for staging, committing</li>
<li>for browsing history</li>
<li>Tcl/Tk based</li>
</ul>


<h4>Details</h4>

<pre><code>$ git gui
$ gitk
$ gitk&amp;
$ gitk --all
</code></pre>

<h2>Widely used GUIs</h2>

<h3>Summary</h3>

<ul>
<li><a href="http://git-scm.com/downloads/guis">Listing of GUIs</a></li>
<li><a href="http://eclipse.github.io/">eGit for Eclipse</a></li>
<li><a href="http://www.syntevo.com/smartgithg/">SmartGit for Windows, Mac, Linux</a></li>
</ul>


      </span>
    </div>
  </div>
</section>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <ul class="text-left">
          <!-- <li>&copy; 2015 <span>GitHub</span>, Inc.</li> -->
          <li>&copy; 2015 <span>OECD</span> STI</li>
          <!-- <li><a href="https://github.com/site/terms">Terms</a></li>
          <li><a href="https://training.github.com/kit/license.html">License</a></li>
          <li><a href="https://github.com/security">Security</a></li>
          <li><a href="https://training.github.com/contact">Contact</a></li> 
          -->
          <li><a href="http://www.oecd.org/contact/">Contact</a></li>
        </ul>
      </div>

      <div class="col-md-2">
        <!-- <a href="http://www.oecd.org/"><span class="mega-octicon octicon-mark-github"></span></a> -->
        <a href="http://www.oecd.org"><img src="/kit/images/OECD_grey.png", width = 80></a>
      </div>

      <div class="col-md-5">
        <ul class="text-right">
          <!-- <li><a href="https://twitter.com/oecd"><span class="octicon octicon-mark-twitter"></span>githubtraining</a></li> -->
          <!--      
          <li><a href="https://status.github.com">Status</a></li>
          <li><a href="https://github.com/blog">Blog</a></li>
          <li><a href="https://github.com/about">About</a></li>
          -->
        </ul>
      </div>
    </div>
  </div>
</footer>



<!-- <script src="../_javascript/workbook.js"></script> -->

</html>
